import t from"axios";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}var o=function(){function e(n){var r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t.create(n),this.instance.all=t.all,this.instance.spread=t.spread,this.instance.token=null==n||null===(r=n.customParams)||void 0===r?void 0:r.token,this.instance.setToken=function(t){o.instance.token=t},this.addRequestInterceptor(n),this.addResponseInterceptor(n)}var n,o,i;return n=e,(o=[{key:"addRequestInterceptor",value:function(t){this.instance.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)}))}},{key:"addResponseInterceptor",value:function(t){this.instance.interceptors.response.use((function(e){return 200===e.status?"[object Object]"!==Object.prototype.toString.call(e.data)?e:function(e){var n=e.data,r=n.code;n.msg;var o=e.data;return r===t.successCode?e.data:(t.messageCallback(o.msg||"Error",null==t?void 0:t.componentType),Promise.reject(o))}(e):(t.messageCallback(e.statusText||"Error",null==t?void 0:t.componentType),Promise.reject(e))}),(function(e){return t.messageCallback(e,null==t?void 0:t.componentType),Promise.reject(e)}))}}])&&r(n.prototype,o),i&&r(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();export{o as HttpRequest};

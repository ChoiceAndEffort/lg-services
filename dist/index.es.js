import e from"axios";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,n||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===t(n)?n:String(n)}function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}var r={503:"服务器内部异常!",401:"访问凭证无效，请重新登录授权!",403:"访问凭证无效，请重新登录授权!"},i=function(){function t(n){var o,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.instance=e.create(n),this.instance.all=e.all,this.instance.spread=e.spread,this.instance.token=null==n||null===(o=n.customParams)||void 0===o?void 0:o.token,this.instance.setToken=function(e){r.instance.token=e},this.addRequestInterceptor(n),this.addResponseInterceptor(n)}var n,i,a;return n=t,(i=[{key:"addRequestInterceptor",value:function(e){var t=this;this.instance.interceptors.request.use((function(e){var n,o,r=t.instance.token||(null===(n=JSON.parse(window.sessionStorage.getItem("vuex")))||void 0===n||null===(o=n.user)||void 0===o?void 0:o.token);return e.headers.token=r||"",e}),(function(e){return Promise.reject(e)}))}},{key:"addResponseInterceptor",value:function(e){this.instance.interceptors.response.use((function(t){return 200===t.status?"[object Object]"!==Object.prototype.toString.call(t.data)?t:function(t){var n=t.data,o=n.code;n.msg;var i=t.data;return 0===o?t.data:401===o||403===o?(e.messageCallback(i.msg||r[o],null==e?void 0:e.componentType),setTimeout((function(){var t,n,o;window.sessionStorage.removeItem("vuex");var r=(null==e||null===(t=e.customParams)||void 0===t?void 0:t.jumpUrl)||(null===(n=window.location.href)||void 0===n||null===(o=n.split("#"))||void 0===o?void 0:o[0]);window.location.href=r}),500),Promise.reject(i)):(e.messageCallback(i.msg||"Error",null==e?void 0:e.componentType),Promise.reject(i))}(t):(e.messageCallback(t.statusText||"Error",null==e?void 0:e.componentType),Promise.reject(t))}),(function(t){return e.messageCallback(t,null==e?void 0:e.componentType),Promise.reject(t)}))}}])&&o(n.prototype,i),a&&o(n,a),Object.defineProperty(n,"prototype",{writable:!1}),t}();export{i as HttpRequest};

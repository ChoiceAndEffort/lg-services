!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("axios"),require("element-ui")):"function"==typeof define&&define.amd?define(["exports","axios","element-ui"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).bundleName={},e.axios,e["element-ui"])}(this,(function(e,t,r){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s,n,a,i=o(t),u="http://192.168.20.151:9099",c="https://erp-api.gggjpg.com:9999",d="https://192.168.20.152:9099",l="https://test-erp.gggjpg.com:2222";function f(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}s=process.env.NODE_ENV,n=process.env.VUE_APP_TITLE,a="","production"===s?a="test"===n?d:"release"===n?l:c:"development"===s&&(a=u),i.default.defaults.baseURL=a,i.default.defaults.withCredentials=!0,i.default.defaults.timeout=3e4,i.default.defaults.headers={"Access-Control-Allow-Origin":"*"},i.default.interceptors.request.use((function(e){var t,r;if(e.headers.Token=(null===(t=JSON.parse(window.sessionStorage.getItem("vuex")))||void 0===t||null===(r=t.user)||void 0===r?void 0:r.token)||"","get"===e.method){var o=Date.now();e.params.t=o}return e}),(function(e){Promise.reject(e)})),i.default.interceptors.response.use((function(e){return 200===e.status?"[object Object]"!==Object.prototype.toString.call(e.data)?e:function(e){var t=e.data,o=t.code;t.msg;var s=e.data;return 0===o?e.data:401===o||403===o?(r.Message({message:s.msg||"访问凭证无效，请重新授权",type:"error"}),setTimeout((function(){var e;window.sessionStorage.removeItem("vuex");var t=window.location.href;window.location.href=null==t||null===(e=t.split("#"))||void 0===e?void 0:e[0]}),500),Promise.reject(s)):(r.Message({message:s.msg||"Error",type:"error"}),Promise.reject(s))}(e):(r.Message({message:e.statusText||"Error",type:"error"}),Promise.reject(e))}),(function(e){r.Message({message:e,type:"error"}),Promise.reject(e)}));var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=i.default.create(t),this.addRequestInterceptor(t),this.addResponseInterceptor(t)}var t,o,s;return t=e,(o=[{key:"addRequestInterceptor",value:function(e){this.instance.interceptors.request.use((function(e){var t,r;if(e.headers.Token=(null===(t=JSON.parse(window.sessionStorage.getItem("vuex")))||void 0===t||null===(r=t.user)||void 0===r?void 0:r.token)||"","get"===e.method){var o=Date.now();e.params.t=o}return e}),(function(e){return Promise.reject(e)}))}},{key:"addResponseInterceptor",value:function(e){this.instance.interceptors.response.use((function(e){return 200===e.status?"[object Object]"!==Object.prototype.toString.call(e.data)?e:function(e){var t=e.data,o=t.code;t.msg;var s=e.data;return 0===o?e.data:401===o||403===o?(r.Message({message:s.msg||"访问凭证无效，请重新授权",type:"error"}),setTimeout((function(){var e;window.sessionStorage.removeItem("vuex");var t=window.location.href;window.location.href=null==t||null===(e=t.split("#"))||void 0===e?void 0:e[0]}),500),Promise.reject(s)):(r.Message({message:s.msg||"Error",type:"error"}),Promise.reject(s))}(e):(r.Message({message:e.statusText||"Error",type:"error"}),Promise.reject(e))}),(function(e){return r.Message({message:e,type:"error"}),Promise.reject(e)}))}}])&&f(t.prototype,o),s&&f(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();Object.defineProperty(e,"axios",{enumerable:!0,get:function(){return i.default}}),e.HttpRequest=p,Object.defineProperty(e,"__esModule",{value:!0})}));
